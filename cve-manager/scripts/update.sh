#!/bin/bash
source ./scripts/colors.sh

source ./scripts/banner.sh

echo -e "${Red}[WARNING] Removing old files\n${NC}"
sleep 3
rm -v ./nvd/*.zip
echo -e "${Cyan}[INFO] Downloading and parsing CVE files from NIST NVD...\n${NC}"
./scripts/cve_manager.py -d -p -csv
echo -e "${Red}[WARNING] Removing all data..\n${NC}"
./scripts/cve_manager.py -u postgres -server pg-server -db vuln_db -tr
echo -e "${Cyan}[INFO] Populating database..\n${NC}"
./scripts/cve_manager.py -u postgres -server pg-server -db vuln_db -idb -p
echo -e "${Yellow}Done!\n${NC}"

echo -e "${Purple}You can view imported data with pgAdmin4.
Open your browser${NC} http://localhost:8080${Purple} and use these credentials:${NC}"

echo -e "E-mail: ${Red}user@example.com${NC} Password: ${Red}password\n${NC}"
